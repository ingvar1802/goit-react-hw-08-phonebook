(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{19:function(e,t,n){e.exports={form:"ContactForm_form__39KI6",label:"ContactForm_label__1eZ_0",input:"ContactForm_input__1TX0j",button:"ContactForm_button__3odSO"}},24:function(e,t,n){e.exports={list:"ContactList_list__21Hjg",item:"ContactList_item__1DvPe",text:"ContactList_text__2hKho",span:"ContactList_span__2iPI0",button:"ContactList_button__x9LhC"}},46:function(e,t,n){e.exports={container:"Container_container__3i19u"}},47:function(e,t,n){e.exports={input:"Filter_input__1fgp5"}},56:function(e,t,n){},85:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),o=n(26),i=n.n(o),s=(n(56),n(2)),u=n(46),l=n.n(u);var b=function(e){var t=e.children;return Object(c.jsx)("div",{className:l.a.container,children:t})},j=n(27),d=function(e){return e.contacts.items},h=function(e){return e.contacts.filter},O=Object(j.a)([d,h],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),f=n(18),p=n(15),g=n(12),x=n.n(g),m=n(5),v=Object(m.b)("phonebook/addContactRequest"),y=Object(m.b)("phonebook/addContactSuccsess"),k=Object(m.b)("phonebook/addContactError"),C=Object(m.b)("phonebook/deleteContactRequest"),w=Object(m.b)("phonebook/deleteContactSuccsess"),_=Object(m.b)("phonebook/deleteContactError"),L=Object(m.b)("phonebook/fetchContactRequest"),I=Object(m.b)("phonebook/fetchContactSuccsess"),S=Object(m.b)("phonebook/fetchContactError"),R=Object(m.b)("phonebook/changeFilter");x.a.defaults.baseURL="http://localhost:4040";var F=n(19),U=n.n(F);var N=function(){var e=Object(s.c)(d),t=Object(s.b)(),n=function(e,n){return t(function(e,t){return function(n){var c={name:e,number:t};n(v()),x.a.post("/contacts",c).then((function(e){var t=e.data;return n(y(t))})).catch((function(e){return n(k(e))}))}}(e,n))},a=Object(r.useState)(""),o=Object(p.a)(a,2),i=o[0],u=o[1],l=Object(r.useState)(""),b=Object(p.a)(l,2),j=b[0],h=b[1];return Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),u(""),h(""),function(){var t=e.reduce((function(e,t){return[].concat(Object(f.a)(e),[t.name])}),[]),n=e.reduce((function(e,t){return[].concat(Object(f.a)(e),[t.number])}),[]);(t.includes(i)||n.includes(j))&&alert("".concat(i).concat(j," is already in contacts")),""!==i&&""!==j||alert("Enter all data, please")}()||n(i,j)},className:U.a.form,children:[Object(c.jsxs)("label",{className:U.a.label,children:["\u0418\u043c\u044f:",Object(c.jsx)("input",{type:"text",name:"name",value:i,placeholder:"Jack Sparrow",onChange:function(e){return u(e.currentTarget.value)},className:U.a.input})]}),Object(c.jsxs)("label",{className:U.a.label,children:["\u041d\u043e\u043c\u0435\u0440:",Object(c.jsx)("input",{type:"tel",name:"number",value:j,placeholder:"111-11-11",onChange:function(e){return h(e.currentTarget.value)},className:U.a.input})]}),Object(c.jsx)("button",{type:"submit",className:U.a.button,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})},z=n(47),D=n.n(z);var E=function(){var e=Object(s.b)(),t=Object(s.c)(h);return Object(c.jsxs)("label",{children:[Object(c.jsx)("p",{children:"\u041d\u0430\u0439\u0442\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442:"}),Object(c.jsx)("input",{className:D.a.input,type:"text",value:t,onChange:function(t){return e(R(t.target.value))}})]})},W=n(24),B=n.n(W);var T=function(){var e=Object(s.c)(O),t=Object(s.b)(),n=function(e){return t((n=e,function(e){e(C()),x.a.delete("./contacts/".concat(n)).then((function(){return e(w(n))})).catch((function(t){return e(_(t))}))}));var n};return Object(c.jsx)("ul",{className:B.a.list,children:e.map((function(e){var t=e.id,r=e.name,a=e.number;return Object(c.jsxs)("li",{className:B.a.item,children:[Object(c.jsxs)("p",{className:B.a.text,children:[r,": ",a]}),Object(c.jsx)("button",{type:"button",onClick:function(){return n(t)},className:B.a.button,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]},t)}))})},q={section:{color:"white",border:" 2px solid white",padding:10,borderRadius:10,background:"#5d8aa8"}};function A(){var e=Object(s.c)(O).length;return Object(c.jsxs)(b,{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(N,{}),Object(c.jsxs)("div",{style:q.section,children:[Object(c.jsx)("h2",{children:"Contacts:"}),Object(c.jsxs)("p",{children:["\u041e\u0431\u0449\u0435\u0435 \u043a\u043e\u043b-\u0432\u043e: ",e]}),Object(c.jsx)(E,{}),Object(c.jsx)(T,{})]})]})}var J=function(){return Object(c.jsx)(c.Fragment,{})},P=n(16),K=n.n(P),H=n(25);x.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var M=function(e){x.a.defaults.headers.common.Authorization="Bearer ".concat(e)},V=function(){x.a.defaults.headers.common.Authorization=""},X={register:Object(m.c)("auth/register",function(){var e=Object(H.a)(K.a.mark((function e(t){var n,c;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("credentials ".concat(t)),e.prev=1,e.next=4,x.a.post("/users/signup",t);case 4:return n=e.sent,c=n.data,M(c.token),e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()),logIn:Object(m.c)("auth/login",function(){var e=Object(H.a)(K.a.mark((function e(t){var n,c;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("/users/login",t);case 3:return n=e.sent,c=n.data,M(c.token),e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),logOut:Object(m.c)("auth/logout",Object(H.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("users/logout");case 3:V(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),fetchCurrentUser:Object(m.c)("auth/refresh",function(){var e=Object(H.a)(K.a.mark((function e(t,n){var c,r,a,o;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getState(),null!==(r=c.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return M(r),e.prev=5,e.next=8,x.a.get("users/current");case 8:return a=e.sent,o=a.data,e.abrupt("return",o);case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},Z={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15},section:{color:"white",border:" 2px solid white",padding:10,borderRadius:10,background:"#5d8aa8"},button:{fontSize:15,fontWeight:700,border:" 2px solid white",borderRadius:10,color:"#5d8aa8",padding:10,background:"white",cursor:"pointer"}};function G(){var e=Object(s.b)(),t=Object(r.useState)(""),n=Object(p.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(""),u=Object(p.a)(i,2),l=u[0],b=u[1],j=function(e){var t=e.target,n=t.name,c=t.value;switch(n){case"email":return o(c);case"password":return b(c);default:return}};return Object(c.jsxs)("div",{style:Z.section,children:[Object(c.jsx)("h1",{children:":)"}),Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(X.logIn({email:a,password:l})),o(""),b("")},style:Z.form,autoComplete:"on",children:[Object(c.jsxs)("label",{style:Z.label,children:["E-mail",Object(c.jsx)("input",{type:"email",name:"email",value:a,onChange:j})]}),Object(c.jsxs)("label",{style:Z.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(c.jsx)("input",{type:"password",name:"password",value:l,onChange:j})]}),Object(c.jsx)("button",{type:"submit",style:Z.button,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}var Q={form:{width:320},label:{display:"flex",flexDirection:"column",marginBottom:15},section:{color:"white",border:"2px solid white",padding:10,borderRadius:10,background:"#5d8aa8"},button:{fontSize:15,fontWeight:700,borderRadius:10,border:" 2px solid white",color:"#5d8aa8",padding:10,background:"white",cursor:"pointer"}};function Y(){var e=Object(s.b)(),t=Object(r.useState)(""),n=Object(p.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(""),u=Object(p.a)(i,2),l=u[0],b=u[1],j=Object(r.useState)(""),d=Object(p.a)(j,2),h=d[0],O=d[1],f=function(e){var t=e.target,n=t.name,c=t.value;switch(n){case"name":return o(c);case"email":return b(c);case"password":return O(c);default:return}};return Object(c.jsxs)("div",{style:Q.section,children:[Object(c.jsx)("h1",{children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"}),Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(X.register({name:a,email:l,password:h})),o(""),b(""),O("")},style:Q.form,autoComplete:"on",children:[Object(c.jsxs)("label",{style:Q.label,children:["\u0418\u043c\u044f",Object(c.jsx)("input",{type:"text",name:"name",value:a,onChange:f})]}),Object(c.jsxs)("label",{style:Q.label,children:["E-mail",Object(c.jsx)("input",{type:"email",name:"email",value:l,onChange:f})]}),Object(c.jsxs)("label",{style:Q.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(c.jsx)("input",{type:"password",name:"password",value:h,onChange:f})]}),Object(c.jsx)("button",{type:"submit",style:Q.button,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})}var $,ee=n(14),te={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name},getIsFetchingCurrent:function(e){return e.auth.isFetchingCurrentUser}},ne={link:{fontSize:"20px",display:"inline-block",textDecoration:"none",marginLeft:25,padding:12,fontWeight:700,color:"white"},activeLink:{color:"#5d8aa8"}},ce=function(){var e=Object(s.c)(te.getIsLoggedIn);return Object(c.jsxs)("nav",{children:[Object(c.jsx)(ee.b,{to:"/",exact:!0,style:ne.link,activeStyle:ne.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e&&Object(c.jsx)(ee.b,{to:"/contacts",exact:!0,style:ne.link,activeStyle:ne.activeLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]})},re=n(3),ae=Object(m.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:($={},Object(re.a)($,X.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(re.a)($,X.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(re.a)($,X.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(re.a)($,X.fetchCurrentUser.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(re.a)($,X.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isLoggedIn=!1})),Object(re.a)($,X.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(re.a)($,X.fetchCurrentUser.rejected,(function(e){e.isFetchingCurrentUser=!1})),$)}).reducer,oe=n.p+"static/media/default-avatar.10691648.png",ie={container:{display:"flex",alignItems:"center",marginRight:25,color:"white,"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12},button:{fontSize:15,fontWeight:700,borderRadius:10,border:" 2px solid white",color:"#5d8aa8",padding:10,background:"white",cursor:"pointer"}};function se(){var e=Object(s.b)(),t=Object(s.c)(te.getUserName),n=oe;return Object(c.jsxs)("div",{style:ie.container,children:[Object(c.jsx)("img",{src:n,alt:"",width:"32",style:ie.avatar}),Object(c.jsxs)("span",{style:ie.name,children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",t]}),Object(c.jsx)("button",{type:"button",style:ie.button,onClick:function(){return e(X.logOut())},children:"\u0412\u044b\u0439\u0442\u0438"})]})}var ue={link:{display:"inline-block",textDecoration:"none",padding:12,marginRight:20,fontSize:20,fontWeight:700,color:"white"},activeLink:{color:"#5d8aa8"}};function le(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(ee.b,{to:"/register",exact:!0,style:ue.link,activeStyle:ue.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(c.jsx)(ee.b,{to:"/login",exact:!0,style:ue.link,activeStyle:ue.activeLink,children:"\u0412\u043e\u0439\u0442\u0438"})]})}var be={header:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"transparent",border:0,borderRadius:"10px"}};function je(){var e=Object(s.c)(te.getIsLoggedIn);return Object(c.jsxs)("header",{style:be.header,children:[Object(c.jsx)(ce,{}),e?Object(c.jsx)(se,{}):Object(c.jsx)(le,{})]})}var de=n(6),he=n(21),Oe=n(29);function fe(e){var t=e.children,n=Object(Oe.a)(e,["children"]),r=Object(s.c)(te.getIsLoggedIn);return Object(c.jsx)(de.b,Object(he.a)(Object(he.a)({},n),{},{children:r?t:Object(c.jsx)(de.a,{to:"/login"})}))}function pe(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,a=Object(Oe.a)(e,["children","restricted"]),o=Object(s.c)(te.getIsLoggedIn)&&r;return Object(c.jsx)(de.b,Object(he.a)(Object(he.a)({},a),{},{children:o?Object(c.jsx)(de.a,{to:"/contacts"}):t}))}n(85);function ge(){var e=Object(s.b)(),t=Object(s.c)(te.getIsFetchingCurrent);return Object(r.useEffect)((function(){e(X.fetchCurrentUser())}),[e]),!t&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(je,{}),Object(c.jsx)(b,{children:Object(c.jsxs)(de.d,{children:[Object(c.jsx)(pe,{exact:!0,path:"/",children:Object(c.jsx)(J,{})}),Object(c.jsx)(pe,{exact:!0,path:"/register",restricted:!0,children:Object(c.jsx)(Y,{})}),Object(c.jsx)(pe,{exact:!0,path:"/login",restricted:!0,children:Object(c.jsx)(G,{})}),Object(c.jsx)(fe,{children:Object(c.jsx)(A,{path:"/contacts"})})]})})]})}var xe,me,ve,ye=n(48),ke=n(49),Ce=n.n(ke),we=n(17),_e=n(50),Le=n.n(_e),Ie=n(7),Se=Object(m.d)([],(xe={},Object(re.a)(xe,I,(function(e,t){return t.payload})),Object(re.a)(xe,y,(function(e,t){var n=t.payload;return[].concat(Object(f.a)(e),[n])})),Object(re.a)(xe,w,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),xe)),Re=Object(m.d)(!1,(me={},Object(re.a)(me,L,(function(){return!0})),Object(re.a)(me,I,(function(){return!1})),Object(re.a)(me,S,(function(){return!1})),Object(re.a)(me,v,(function(){return!0})),Object(re.a)(me,y,(function(){return!1})),Object(re.a)(me,k,(function(){return!1})),Object(re.a)(me,C,(function(){return!0})),Object(re.a)(me,w,(function(){return!1})),Object(re.a)(me,_,(function(){return!1})),me)),Fe=Object(m.d)("",Object(re.a)({},R,(function(e,t){return t.payload}))),Ue=Object(m.d)(null,(ve={},Object(re.a)(ve,S,(function(e,t){return t.payload})),Object(re.a)(ve,L,(function(){return null})),Object(re.a)(ve,v,(function(){return null})),Object(re.a)(ve,C,(function(){return null})),Object(re.a)(ve,_,(function(e,t){return t.payload})),Object(re.a)(ve,k,(function(e,t){return t.payload})),ve)),Ne=Object(Ie.c)({items:Se,filter:Fe,loading:Re,error:Ue}),ze=[].concat(Object(f.a)(Object(m.f)({serializableCheck:{ignoredActions:[we.a,we.f,we.b,we.c,we.d,we.e]}})),[Ce.a]),De={key:"auth",storage:Le.a,whitelist:["token"]},Ee=Object(m.a)({reducer:{auth:Object(we.g)(De,ae),contacts:Ne},middleware:ze,devTools:!1}),We=Object(we.h)(Ee);i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(s.a,{store:Ee,children:Object(c.jsx)(ye.a,{loading:null,persistor:We,children:Object(c.jsx)(ee.a,{children:Object(c.jsx)(ge,{})})})})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.daec80a9.chunk.js.map